spring:
  cassandra:
    contact-points: cassandra1:9042, cassandra2:9042, cassandra3:9042
    keyspace-name: calendar
    schema-action: create_if_not_exists
    request:
      timeout: 10s
    connection:
      connect-timeout: 10s
      init-query-timeout: 10s
    local-datacenter: datacenter1
    username: cassandra
    password: cassandra
    port: 9042
  application:
    name: calendars-query
  cloud:
    function:
      definition:
        bandMemberRemovedMessageRouter;
        calendarEntryMemberEmptyRestrictionCreatedMessageRouter;
        calendarEntryMemberRestrictionChangedMessageRouter;
        calendarEntryAddedMessageRouter;
        calendarEntryForMemberAddedMessageRouter;
        calendarEntryEditedMessageRouter;
        calendarEntryRemovedMessageRouter;
    stream:
      function:
        bindings:
          bandMemberRemovedMessageRouter-in-0: band-member-removed
          calendarEntryMemberEmptyRestrictionCreatedMessageRouter-in-0: calendar-entry-member-empty-restriction-created
          calendarEntryMemberRestrictionChangedMessageRouter-in-0: calendar-entry-member-restriction-changed
          calendarEntryAddedMessageRouter-in-0: bm.calendar.entry.added
          calendarEntryForMemberAddedMessageRouter-in-0: bm.calendar.entry.for.member.added
          calendarEntryEditedMessageRouter-in-0: bm.calendar.entry.edited
          calendarEntryRemovedMessageRouter-in-0: bm.calendar.entry.removed
      default:
        group: ${spring.application.name}
        content-type: application/json
      bindings:
        band-member-removed:
          destination: bm.band.member.removed
        calendar-entry-member-empty-restriction-created:
          destination: bm.calendar.entry.member.empty.restriction.created
          consumer:
            batch-mode: true
        calendar-entry-member-restriction-changed:
          destination: bm.calendar.entry.member.restriction.changed
        calendar-entry-added:
          destination: bm.calendar.entry.added
        calendar-entry-for-member-added:
          destination: bm.calendar.entry.for.member.added
        calendar-entry-edited:
          destination: bm.calendar.entry.edited
        calendar-entry-removed:
          destination: bm.calendar.entry.removed
      kafka:
        binder:
          auto-create-topics: true #TODO remove for manual topic creation
          brokers: kafka1:9091,kafka2:9092,kafka3:9093